<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explore Nairobi's Finest Restaurants</title>
    <link rel="stylesheet" href="/public/stylesheets/styles.css">
    <link rel="shortcut icon" href="/assets/images/nairobifeastlogo(144).png" type="image/png+xml">
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#003B95">
    <link rel="apple-touch-icon" href="/images/icon-192x192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <style>
        #installBanner {
            position: fixed;
            bottom: -100px;
            left: 0;
            right: 0;
            background-color: #003B95;
            color: #fff;
            padding: 12px;
            text-align: center;
            z-index: 9999;
            transition: bottom 0.3s ease-in-out;
        }
        #installBanner.show {
            bottom: 0;
        }
        .install-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            max-width: 1200px;
            margin: 0 auto;
        }
        .install-text {
            margin-bottom: 10px;
        }
        .install-buttons {
            display: flex;
            gap: 10px;
        }
        .install-button {
            padding: 8px 16px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s;
            width: 120px;
        }
        #installApp {
            background-color: #ffffff;
            color: #003B95;
        }
        #cancelInstall {
            background-color: transparent;
            color: #fff;
            border: 1px solid #fff;
        }
        #cookie-consent {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.95);
            color: #fff;
            padding: 24px;
            border-radius: 14px;
            width: 90%;
            max-width: 420px;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.25);
            display: none;
            z-index: 9999;
        }
        .cookie-content {
            text-align: left;
        }
        .cookie-content h2 {
            color: #fff;
            font-size: 24px;
            margin: 0 0 12px 0;
            font-weight: 500;
        }
        .cookie-content p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            line-height: 1.5;
            margin: 0 0 24px 0;
        }
        .cookie-buttons {
            display: flex;
            gap: 12px;
        }
        .cookie-button {
            flex: 1;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        #accept-cookies {
            background-color: #003B95;
            color: #ffffff;
        }
        #reject-cookies {
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
        }
        #cookie-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 9998;
        }
    </style>
</head>
<body>
    <div id="cookie-overlay"></div>
    <div id="cookie-consent">
        <div class="cookie-content">
            <h2>Cookie Settings</h2>
            <p>We use cookies to enhance your experience, analyze site traffic and deliver personalized content. Read our <a href="/public/views/cookie-policy.html" class="cookie-policy-link">Cookie Policy</a>.</p>
            <div class="cookie-buttons">
                <button id="accept-cookies" class="cookie-button">Accept</button>
                <button id="reject-cookies" class="cookie-button">Reject</button>
            </div>
        </div>
    </div>

    <div id="installBanner">
        <div class="install-content">
            <div class="install-text">
                <p>Welcome to Nairobi Feast. You can now install as a site!</p>
            </div>
            <div class="install-buttons">
                <button id="installApp" class="install-button">Install Now</button>
                <button id="cancelInstall" class="install-button">Maybe Later</button>
            </div>
        </div>
    </div>

    <button class="menu-toggle" id="menuToggle">
        <i data-lucide="menu"></i>
    </button>
    <div class="side-menu" id="sideMenu">
        <a href="/public/views/termsofservice.html">Terms of Service</a>
        <a href="/public/views/privacypolicy.html">Privacy Policy</a>
    </div>
    <header>
        <div class="container">
            <a href="/index.html" class="logo">Nairobi Feast</a>
            <nav class="desktop-nav">
                <a href="/index.html" class="nav-link">Home</a>
                <a href="/public/views/browse.html" class="nav-link">Browse</a>
                <a href="/public/views/about.html" class="nav-link">About</a>
                <a href="/public/views/contact.html" class="nav-link">Contact</a>
            </nav>
        </div>
    </header>

    <nav class="mobile-nav">
        <a href="/index.html" class="nav-link">
            <i data-lucide="home"></i>
            <span>Home</span>
        </a>
        <a href="/public/views/browse.html" class="nav-link">
            <i data-lucide="utensils"></i>
            <span>Browse</span>
        </a>
        <a href="/public/views/about.html" class="nav-link">
            <i data-lucide="info"></i>
            <span>About</span>
        </a>
        <a href="/public/views/contact.html" class="nav-link">
            <i data-lucide="mail"></i>
            <span>Contact</span>
        </a>
    </nav>

    <main>
        <section class="restaurants-hero">
            <div class="container">
                <h1>Explore Nairobi's Finest Restaurants</h1>
                <p>Discover a world of culinary delights in the heart of Kenya</p>
                <div class="search-bar">
                    <input type="text" id="search-input" placeholder="Search for restaurants...">
                    <button id="search-button" class="search-button">
                        <i data-lucide="search"></i>
                        Search
                    </button>
                </div>
            </div>
        </section>
        <section class="featured">
            <div class="container">
                <h2>Featured Restaurants</h2>
                <div class="restaurant-grid">
                    <a href="/public/views/botanica.html" class="restaurant-card">
                        <img src="/assets/images/Botanica.jpg" alt="Botanica">
                        <div class="card-content">
                            <h3>Botanica</h3>
                            <p>Kitchen and Gin Bar</p>
                            <div class="rating">
                                <i data-lucide="star" class="star-icon"></i>
                                <span>4.4</span>
                            </div>
                        </div>
                    </a>
                    <a href="/public/views/bambino.html" class="restaurant-card">
                        <img src="/assets/images/bambino.jpg" alt="Bambino">
                        <div class="card-content">
                            <h3>Bambino</h3>
                            <p>Kitchen and Bar</p>
                            <div class="rating">
                                <i data-lucide="star" class="star-icon"></i>
                                <span>4.2</span>
                            </div>
                        </div>
                    </a>
                    <a href="/public/views/inti.html" class="restaurant-card">
                        <img src="/assets/images/INTI.jpg" alt="INTI">
                        <div class="card-content">
                            <h3>INTI</h3>
                            <p>A Nikkei Experience</p>
                            <div class="rating">
                                <i data-lucide="star" class="star-icon"></i>
                                <span>4.5</span>
                            </div>
                        </div>
                    </a>
                    <a href="/public/views/slate-restaurant.html" class="restaurant-card">
                        <img src="/assets/images/slate.jpg" alt="Slate">
                        <div class="card-content">
                            <h3>Slate</h3>
                            <p>Kitchen and Bar</p>
                            <div class="rating">
                                <i data-lucide="star" class="star-icon"></i>
                                <span>4.3</span>
                            </div>
                        </div>
                    </a>
                </div>
                <a href="/public/views/all-restaurants.html" class="view-all-button">View All Restaurants</a>
            </div>
        </section>
     
        <section class="recommendation-special">
            <div class="container">
                <div class="container-grid">
                    <div id="randomizer" class="randomizer-container">
                        <h2 class="recommendation-title"><strong>Restaurant Randomizer</strong></h2>
                        <p class="randomizer-subtitle">Feeling adventurous? Let fate decide your next culinary experience!</p>
                        <div class="randomizer-card">
                            <img id="randomizer-image" src="placeholder-image.jpg" alt="Random Restaurant">
                            <div class="randomizer-content">
                                <h3 id="randomizer-name">Today's Featured Restaurant</h3>
                                <p id="randomizer-description">Experience the unique flavors of our daily featured restaurant!</p>
                                <div class="button-group">
                                    <a id="randomizer-link" href="#" class="button view-restaurant-button">
                                        <i data-lucide="eye"></i>
                                        View Restaurant
                                    </a>
                                    <button id="randomize-button" class="button randomize-button">
                                        <i data-lucide="dice-3"></i>
                                        Randomize
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="recommendation-container">
                        <h2 class="recommendation-title"><strong>Get a Restaurant Recommendation</strong></h2>
                        <p class="recommendation-subtitle">Not sure where to eat? Let us suggest a restaurant for you!</p>
                        <form id="recommendation-form" action="/public/views/recommendations.html" method="get">
                            <div class="recommendation-form">
                                <label for="cuisine" class="form-label">Preferred Cuisine:</label>
                                <div class="select-wrapper">
                                    <select id="cuisine" name="cuisine" class="form-select">
                                        <option value="">Any</option>
                                        <option value="International">International</option>
                                        <option value="African">African</option>
                                        <option value="Italian">Italian</option>
                                        <option value="indian">Indian</option>
                                        <option value="mexican">Mexican</option>
                                        <option value="brazillian">Brazilian</option>
                                        <option value="Lebanese">Lebanese</option>
                                        <option value="Peruvian">Peruvian</option>
                                        <option value="Mediterranean">Mediterranean</option>
                                    </select>
                                </div>
                                <label for="price" class="form-label">Price Range:</label>
                                <div class="select-wrapper">
                                    <select id="price" name="price" class="form-select">
                                        <option value="">Any</option>
                                        <option value="budget">Budget</option>
                                        <option value="mid-range">Mid-range</option>
                                        <option value="high-end">High-end</option>
                                    </select>
                                </div>
                                <button type="submit" class="recommendation-button">Get Recommendation</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Nairobi Feast</h3>
                    <p>Discover the best dining experiences in Nairobi.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/public/views/about.html">About Us</a></li>
                        <li><a href="/public/views/contact.html">Contact</a></li>
                        <li><a href="/public/views/privacypolicy.html">Privacy Policy</a></li>
                        <li><a href="/public/views/termsofservice.html">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Connect With Us</h4>
                    <div class="social-links">
                        <a href="https://facebook.com"><i data-lucide="facebook"></i></a>
                        <a href="https://twitter.com/nairobidining"><i data-lucide="twitter"></i></a>
                        <a href="https://instagram.com/nairobidining"><i data-lucide="instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="copyright">
                © 2025 Nairobi Feast. All rights reserved.
            </div>
        </div>
    </footer>

    <script type="module" src="/public/javascript/randomize.js"></script>
    <script type="module" src="/public/javascript/restaurants.js"></script>
    <script src="/public/javascript/recommendations.js"></script>
    <script src="/public/javascript/menu.js"></script>
    <script src="/public/javascript/cookie-consent.js"></script>
    <script>
        lucide.createIcons();
    </script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('Service Worker registered successfully:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
    <script>
        let deferredPrompt;
        const installBanner = document.getElementById('installBanner');
        const installApp = document.getElementById('installApp');
        const cancelInstall = document.getElementById('cancelInstall');
        const cookieConsent = document.getElementById('cookie-consent');
        const acceptCookies = document.getElementById('accept-cookies');
        const rejectCookies = document.getElementById('reject-cookies');
        const cookieOverlay = document.getElementById('cookie-overlay');

        function showCookieConsent() {
            cookieConsent.style.display = 'block';
            cookieOverlay.style.display = 'block';
        }

        function hideCookieConsent() {
            cookieConsent.style.display = 'none';
            cookieOverlay.style.display = 'none';
        }

        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                let date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/";
        }

        function getCookie(name) {
            let nameEQ = name + "=";
            let ca = document.cookie.split(';');
            for(let i=0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function checkCookieConsent() {
            if (getCookie('cookieConsent') === null) {
                showCookieConsent();
            } else {
                setTimeout(checkInstallBanner, 4000);
            }
        }

        function checkInstallBanner() {
            if (deferredPrompt) {
                installBanner.classList.add('show');
            }
        }

        acceptCookies.addEventListener('click', () => {
            setCookie('cookieConsent', 'accepted', 365);
            hideCookieConsent();
            setTimeout(checkInstallBanner, 4000);
        });

        rejectCookies.addEventListener('click', () => {
            setCookie('cookieConsent', 'rejected', 365);
            hideCookieConsent();
            setTimeout(checkInstallBanner, 4000);
        });

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
        });

        installApp.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log(`User response to the install prompt: ${outcome}`);
                deferredPrompt = null;
            }
            installBanner.classList.remove('show');
        });

        cancelInstall.addEventListener('click', () => {
            installBanner.classList.remove('show');
        });

        window.addEventListener('appinstalled', () => {
            console.log('PWA was installed');
            installBanner.classList.remove('show');
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', checkCookieConsent);
    </script>
</body>
</html>